<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Trang b·∫øp - Nh√† h√†ng VIP PRO</title>
  <link rel="stylesheet" href="/css/home_bep.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <h3>üç≥ B·∫æP</h3>
      </div>

      <ul class="menu">
        <li class="active"><i class="fa-solid fa-house"></i> <a href="#">Trang ch·ªß</a></li>
        <li><i class="fa-solid fa-user"></i> <a href="#">Th√¥ng tin c√° nh√¢n</a></li>
      </ul>

      <div class="logout">
        <a href="/logout">ƒêƒÉng xu·∫•t</a>
      </div>
    </aside>

    <!-- Main content -->
    <main class="main">
      <h1>NH√Ä H√ÄNG SI√äU C·∫§P VIP PRO</h1>

      <div class="ban-list">
        <% if (orders && orders.length > 0) { %>
          <% orders.forEach(order => { %>
            <div class="ban-item">
              <h3>B√†n <%= order.MaBan %></h3>
              <p><strong>M√£ Order:</strong> <%= order.MaOder %></p>
              <ul>
                <% order.monAnList.forEach(mon => { %>
                  <li>
                    <%= mon.TenMon %> - <%= mon.SoLuong %> ph·∫ßn
                  </li>
                <% }) %>
              </ul>
              <button class="done-btn" onclick="hoanThanh('<%= order.MaOder %>')">Ho√†n th√†nh</button>
            </div>
          <% }) %>
        <% } else { %>
          <p>Hi·ªán ch∆∞a c√≥ ƒë∆°n h√†ng n√†o c·∫ßn ch·∫ø bi·∫øn.</p>
        <% } %>
      </div>
    </main>
  </div>

  <script>
    function hoanThanh(maOder) {
      if (confirm(`X√°c nh·∫≠n ho√†n th√†nh order ${maOder}?`)) {
        fetch(`/bep/hoan-thanh/${maOder}`, { method: "POST" })
          .then(res => res.text())
          .then(msg => alert(msg))
          .catch(err => console.error(err));
      }
    }
  </script>
</body>
</html>
