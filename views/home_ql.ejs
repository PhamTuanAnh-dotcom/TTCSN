<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Trang Qu·∫£n L√Ω - Nh√† h√†ng si√™u c·∫•p VIP PRO</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <style>
    body {
      display: flex;
      height: 100vh;
      margin: 0;
      overflow: hidden;
      background-color: #f8f9fa;
    }

    /* Sidebar */
    .sidebar {
      width: 230px;
      background-color: #2c3e50;
      color: white;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 10px 0;
    }

    .sidebar .menu {
      flex-grow: 1;
    }

    .sidebar a {
      display: block;
      color: white;
      text-decoration: none;
      padding: 12px 20px;
      font-size: 16px;
    }

    .sidebar a:hover,
    .sidebar a.active {
      background-color: #34495e;
      border-left: 4px solid #1abc9c;
    }

    .sidebar .logout {
      text-align: center;
      padding: 10px;
      border-top: 1px solid #47525d;
    }

    /* Content */
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
    }

    header {
      background-color: #fff;
      padding: 15px;
      text-align: center;
      border-bottom: 1px solid #ddd;
      font-size: 22px;
      font-weight: bold;
    }

    .floor-select {
      padding: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .table-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      padding: 20px;
    }

    .table-item {
      background-color: white;
      border: 2px solid #ccc;
      border-radius: 10px;
      height: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      transition: 0.2s;
    }

    .table-item:hover {
      background-color: #1abc9c;
      color: white;
      border-color: #16a085;
    }
     .profile-card {
      max-width: 600px;
      margin: 60px auto;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      background: white;
      padding: 30px;
    }
    .profile-card h3 {
      color: #0d6efd;
      font-weight: 600;
    }
    .form-section {
      margin-top: 40px;
      border-top: 1px solid #ddd;
      padding-top: 30px;
    }
    .btn-custom {
      background-color: #0d6efd;
      color: white;
      border-radius: 8px;
      transition: 0.2s;
    }
    .btn-custom:hover {
      background-color: #0b5ed7;
    }
    .offcanvas-panel {
  position: fixed;
  top: 0;
  right: -400px; /* ·∫©n ngo√†i m√†n h√¨nh */
  width: 380px;
  height: 100%;
  background: white;
  box-shadow: -2px 0 10px rgba(0,0,0,0.2);
  transition: right 0.3s ease;
  overflow-y: auto;
  padding: 20px;
  z-index: 2000;
}

.offcanvas-panel.active {
  right: 0; /* tr∆∞·ª£t v√†o m√†n h√¨nh */
}

.offcanvas-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.offcanvas-header .btn-close {
  background: none;
  border: none;
  font-size: 26px;
  cursor: pointer;
  color: #333;
}
#profilePanel {
  display: none;
}

#profilePanel.active {
  display: block;
  right: 0;
}

  </style>
</head>

<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="menu">
      <a href="#" class="active">üè† Trang ch·ªß</a>
      <a href="#">üë§ Th√¥ng tin c√° nh√¢n</a>
      <a href="/staff/dsnhanvien">‚öôÔ∏è Qu·∫£n l√≠ nh√¢n vi√™n</a>
      <a href="/menu/dsmonan">üçΩÔ∏è Qu·∫£n l√≠ menu</a>
    </div>
    <div class="logout">
      <a href="/auth/logout" class="logout-btn" style="color:#f39c12; text-decoration:none;">üö™ ƒêƒÉng xu·∫•t</a>
    </div>
  </div>

  <!-- Main content -->
  <div class="main-content">
    <header>NH√Ä H√ÄNG SI√äU C·∫§P VIP PRO</header>

    <div class="floor-select">
      <label for="floorSelect">Ch·ªçn t·∫ßng:</label>
      <select id="floorSelect" class="form-select" style="width:150px;">
        <% for(let i = 1; i <= 3; i++) { %>
          <option value="<%= i %>">T·∫ßng <%= i %></option>
        <% } %>
      </select>
    </div>

    <div class="table-grid" id="tableGrid">
      <!-- B√†n s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã ·ªü ƒë√¢y -->
    </div>
  </div> 
<!-- Offcanvas th√¥ng tin c√° nh√¢n -->
<div id="profilePanel" class="offcanvas-panel">
  <div class="offcanvas-header">
    <h5>üë§ Th√¥ng tin Qu·∫£n l√Ω</h5>
    <button id="closePanel" class="btn-close">&times;</button>
  </div>
  <div class="offcanvas-body">
    <p><strong>H·ªç t√™n:</strong> <%= manager.HoTen %></p>
    <p><strong>S·ªë ƒëi·ªán tho·∫°i:</strong> <%= manager.SDT %></p>
    <p><strong>Email:</strong> <%= manager.Gmail %></p>
    <p><strong>CCCD:</strong> <%= manager.CCCD %></p>
    <p><strong>T√†i kho·∫£n:</strong> <%= manager.TaiKhoan %></p>

    <hr>
    <h6>C·∫≠p nh·∫≠t th√¥ng tin</h6>
    <form action="/home_ql/update" method="POST">
      <div class="mb-2">
        <label class="form-label">H·ªç t√™n</label>
        <input type="text" name="HoTen" class="form-control" value="<%= manager.HoTen %>">
      </div>
      <div class="mb-2">
        <label class="form-label">SƒêT</label>
        <input type="text" name="SDT" class="form-control" value="<%= manager.SDT %>">
      </div>
      <div class="mb-2">
        <label class="form-label">Email</label>
        <input type="email" name="Gmail" class="form-control" value="<%= manager.Gmail %>">
      </div>
      <div class="mb-3">
        <label class="form-label">CCCD</label>
        <input type="text" name="CCCD" class="form-control" value="<%= manager.CCCD %>">
      </div>
      <button type="submit" class="btn btn-primary w-100">L∆∞u thay ƒë·ªïi</button>
    </form>
  </div>
</div>
<script>
    const tableGrid = document.getElementById('tableGrid');
    const floorSelect = document.getElementById('floorSelect');

    // Render b√†n theo t·∫ßng (m·ªói t·∫ßng 9 b√†n)
    function renderTables(floor) {
      tableGrid.innerHTML = '';
      for (let i = 1; i <= 9; i++) {
        const tableNumber = floor * 100 + i;
        const div = document.createElement('div');
        div.className = 'table-item';
        div.textContent = `B√†n ${tableNumber}`;
        div.onclick = () => {
          window.location.href = `/order/${tableNumber}`;
        };
        tableGrid.appendChild(div);
      }
    }

    // M·∫∑c ƒë·ªãnh t·∫ßng 1
    renderTables(1);
    floorSelect.addEventListener('change', e => {
      renderTables(parseInt(e.target.value));
    });
    // ‚úÖ D·ªØ li·ªáu qu·∫£n l√Ω t·ª´ server (Node truy·ªÅn v√†o)
    const manager = {
    hoten: "<%= manager?.HoTen || '' %>",
    sdt: "<%= manager?.SDT || '' %>",
    gmail: "<%= manager?.Gmail || '' %>",
    cccd: "<%= manager?.CCCD || '' %>",
    manhanvien: "<%= manager?.ID || '' %>"
  };
  const contentArea = document.querySelector('.main-content');
  const sidebarLinks = document.querySelectorAll('.sidebar a');

  sidebarLinks.forEach(link => {
    link.addEventListener('click', e => {
      const text = link.textContent.trim();
    // N·∫øu l√† "Qu·∫£n l√≠ nh√¢n vi√™n" th√¨ ƒë·ªÉ href ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng
    if (text.includes('Qu·∫£n l√≠ nh√¢n vi√™n') || text.includes('Qu·∫£n l√≠ menu') || text.includes('ƒêƒÉng xu·∫•t')) return;
    // C√≤n c√°c m·ª•c kh√°c th√¨ ch·∫∑n
    e.preventDefault();

      // B·ªè active c≈© v√† set active m·ªõi
      sidebarLinks.forEach(l => l.classList.remove('active'));
      link.classList.add('active');
      if (text.includes('Trang ch·ªß')) {
        // Quay l·∫°i giao di·ªán b√†n
        contentArea.innerHTML = `
          <header>NH√Ä H√ÄNG SI√äU C·∫§P VIP PRO</header>
          <div class="floor-select">
            <label for="floorSelect">Ch·ªçn t·∫ßng:</label>
            <select id="floorSelect" class="form-select" style="width:150px;">
              ${[1,2,3].map(i => `<option value="${i}">T·∫ßng ${i}</option>`).join('')}
            </select>
          </div>
          <div class="table-grid" id="tableGrid"></div>
        `;

        const floorSelect = document.getElementById('floorSelect');
        const tableGrid = document.getElementById('tableGrid');

        function renderTables(floor) {
          tableGrid.innerHTML = '';
          for (let i = 1; i <= 9; i++) {
            const tableNumber = floor * 100 + i;
            const div = document.createElement('div');
            div.className = 'table-item';
            div.textContent = `B√†n ${tableNumber}`;
            div.onclick = () => window.location.href = `/order/${tableNumber}`;
            tableGrid.appendChild(div);
          }
        }

        renderTables(1);
        floorSelect.addEventListener('change', e => {
          renderTables(parseInt(e.target.value));
        });
      } 
      else if (text.includes('Th√¥ng tin c√° nh√¢n')) {
        // ‚úÖ Hi·ªÉn th·ªã th√¥ng tin t·ª´ DB
        contentArea.innerHTML = `
          <header>TH√îNG TIN C√Å NH√ÇN</header>
          <div class="p-4">
            <h5>üë§ Th√¥ng tin Qu·∫£n l√Ω</h5>
            <hr>
            <p><strong>H·ªç t√™n:</strong> ${manager.hoten}</p>
            <p><strong>S·ªë ƒëi·ªán tho·∫°i:</strong> ${manager.sdt}</p>
            <p><strong>Email:</strong> ${manager.gmail}</p>
            <p><strong>CCCD:</strong> ${manager.cccd}</p>
            <p><strong>M√£ nh√¢n vi√™n:</strong> ${manager.manhanvien}</p>
            <button class="btn btn-primary edit-info">Ch·ªânh s·ª≠a</button>
          </div>
        `;
      }
    });
  });
  const profilePanel = document.getElementById("profilePanel");
const closePanel = document.getElementById("closePanel");

// Khi b·∫•m v√†o ‚ÄúTh√¥ng tin c√° nh√¢n‚Äù
document.querySelector('.sidebar a:nth-child(2)').addEventListener('click', e => {
  e.preventDefault();

  // ƒê·ª£i m·ªôt ch√∫t ƒë·ªÉ DOM c·∫≠p nh·∫≠t xong
  setTimeout(() => {
    const editBtn = document.querySelector('.edit-info');
    if (editBtn) {
      editBtn.addEventListener('click', e2 => {
        e2.preventDefault();
        profilePanel.classList.add("active");
      });
    }
  }, 100);
});
// Khi b·∫•m n√∫t X
closePanel.addEventListener('click', () => {
  profilePanel.classList.remove("active");
});
  </script>
</body>
</html>
